#parse("/velocity/internal_layout.vm")
#@mainLayout()
<div class="container">
    <div class="card-list">
        <div class="card-list-head">
            <h3>Backups</h3>
        </div>
        <div class="card-list-body card-task">

            #if ($points.size() > 0)
                #foreach ($point in $points)
                    <div class="card-body border mb-1">
                        <div class="card-title">
                            <h6>
                                <ion-icon name="server-outline"></ion-icon>
                                $point.point
                            </h6>
                            <span class="text-small">$point.point</span>
                        </div>
                        <div class="card-meta">
                            <div class="card-options">
                                <form action="/database/$database/point/$point.point/create" method="post"
                                      class="d-inline">
                                    <input type="submit" value="update">
                                </form>
                                <form action="/database/$database/point/$point.point/reset" method="post"
                                      class="d-inline">
                                    <input type="submit" value="reset">
                                </form>
                                <form action="/database/$database/point/$point.point/delete" method="post"
                                      class="d-inline">
                                    <input type="submit" value="delete">
                                </form>
                            </div>
                        </div>
                    </div>
                #end
            #else
                <p>Currently you have no one backups on this database</p>
            #end
        </div>
    </div>
</div>

<div class="container">
    <h3>New backup</h3>
    #if($currentUser.role().maxBackupsPerDB() >= $points.size())
        <form action="/database/$database/point/" method="post" class="shadow border">
            <input name="_csrf" value="$csrf" type="hidden"/>
            <div class="form-floating mb-3">
                <input type="text" name="point" class="form-control" id="floatingInput" placeholder="point">
                <label for="floatingInput">Backup Name</label>
            </div>
            <button class="w-100 btn" type="submit">Create new backup</button>
        </form>
    #else
        You reach you limit - delete one or upgrade plan.
        <button class="w-100 btn disabled" type="submit">Create new backup</button>
    #end
</div>


#end